var VuexORM=function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}var e=t((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),n=t((function(t){var e=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=e)})),r=(n.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),i=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t},o=function(t){try{return!!t()}catch(t){return!0}},u=!o((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),a=e.document,s=r(a)&&r(a.createElement),c=function(t){return s?a.createElement(t):{}},h=!u&&!o((function(){return 7!=Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a})),f=Object.defineProperty,l={f:u?Object.defineProperty:function(t,e,n){if(i(t),e=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}(e,!0),i(n),h)try{return f(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},d=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},p=u?function(t,e,n){return l.f(t,e,d(1,n))}:function(t,e,n){return t[e]=n,t},y={}.hasOwnProperty,v=function(t,e){return y.call(t,e)},m=0,g=Math.random(),b=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++m+g).toString(36))},w=t((function(t){var r=e["__core-js_shared__"]||(e["__core-js_shared__"]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})})),O=w("native-function-to-string",Function.toString),K=t((function(t){var r=b("src"),i=(""+O).split("toString");n.inspectSource=function(t){return O.call(t)},(t.exports=function(t,n,o,u){var a="function"==typeof o;a&&(v(o,"name")||p(o,"name",n)),t[n]!==o&&(a&&(v(o,r)||p(o,r,t[n]?""+t[n]:i.join(String(n)))),t===e?t[n]=o:u?t[n]?t[n]=o:p(t,n,o):(delete t[n],p(t,n,o)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[r]||O.call(this)}))})),R=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},k=function(t,r,i){var o,u,a,s,c=t&k.F,h=t&k.G,f=t&k.S,l=t&k.P,d=t&k.B,y=h?e:f?e[r]||(e[r]={}):(e[r]||{}).prototype,v=h?n:n[r]||(n[r]={}),m=v.prototype||(v.prototype={});for(o in h&&(i=r),i)a=((u=!c&&y&&void 0!==y[o])?y:i)[o],s=d&&u?R(a,e):l&&"function"==typeof a?R(Function.call,a):a,y&&K(y,o,a,t&k.U),v[o]!=a&&p(v,o,s),l&&m[o]!=a&&(m[o]=a)};e.core=n,k.F=1,k.G=2,k.S=4,k.P=8,k.B=16,k.W=32,k.U=64,k.R=128;var M=k,I={}.toString,F=function(t){return I.call(t).slice(8,-1)},$=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==F(t)?t.split(""):Object(t)},S=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},E=function(t){return $(S(t))},A=Math.ceil,j=Math.floor,x=function(t){return isNaN(t=+t)?0:(t>0?j:A)(t)},P=Math.min,C=function(t){return t>0?P(x(t),9007199254740991):0},_=Math.max,B=Math.min,H=function(t){return function(e,n,r){var i,o=E(e),u=C(o.length),a=function(t,e){return(t=x(t))<0?_(t+e,0):B(t,e)}(r,u);if(t&&n!=n){for(;u>a;)if((i=o[a++])!=i)return!0}else for(;u>a;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}},T=t((function(t){var n=w("wks"),r=e.Symbol,i="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=i&&r[t]||(i?r:b)("Symbol."+t))}).store=n})),z=T("unscopables"),U=Array.prototype;null==U[z]&&p(U,z,{});var N,V=H(!0);M(M.P,"Array",{includes:function(t){return V(this,t,arguments.length>1?arguments[1]:void 0)}}),N="includes",U[z][N]=!0;n.Array.includes;var W=w("keys"),D=function(t){return W[t]||(W[t]=b(t))},L=H(!1),G=D("IE_PROTO"),Q="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),q=Object.keys||function(t){return function(t,e){var n,r=E(t),i=0,o=[];for(n in r)n!=G&&v(r,n)&&o.push(n);for(;e.length>i;)v(r,n=e[i++])&&(~L(o,n)||o.push(n));return o}(t,Q)},J={f:Object.getOwnPropertySymbols},Y={f:{}.propertyIsEnumerable},X=function(t){return Object(S(t))},Z=Object.assign,tt=!Z||o((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=Z({},t)[n]||Object.keys(Z({},e)).join("")!=r}))?function(t,e){for(var n=X(t),r=arguments.length,i=1,o=J.f,a=Y.f;r>i;)for(var s,c=$(arguments[i++]),h=o?q(c).concat(o(c)):q(c),f=h.length,l=0;f>l;)s=h[l++],u&&!a.call(c,s)||(n[s]=c[s]);return n}:Z;M(M.S+M.F,"Object",{assign:tt});n.Object.assign;var et=Y.f,nt=function(t){return function(e){for(var n,r=E(e),i=q(r),o=i.length,a=0,s=[];o>a;)n=i[a++],u&&!et.call(r,n)||s.push(t?[n,r[n]]:r[n]);return s}},rt=nt(!0);M(M.S,"Object",{entries:function(t){return rt(t)}});n.Object.entries;var it=nt(!1);M(M.S,"Object",{values:function(t){return it(t)}});n.Object.values;var ot=T("match"),ut=function(t,e,n){if(r(i=e)&&(void 0!==(o=i[ot])?o:"RegExp"==F(i)))throw TypeError("String#"+n+" doesn't accept regex!");var i,o;return String(S(t))},at=T("match"),st="".startsWith;M(M.P+M.F*function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[at]=!1,!"/./"[t](e)}catch(t){}}return!0}("startsWith"),"String",{startsWith:function(t){var e=ut(this,t,"startsWith"),n=C(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return st?st.call(e,r,n):e.slice(n,n+r.length)===r}});n.String.startsWith;var ct={},ht=u?Object.defineProperties:function(t,e){i(t);for(var n,r=q(e),o=r.length,u=0;o>u;)l.f(t,n=r[u++],e[n]);return t},ft=e.document,lt=ft&&ft.documentElement,dt=D("IE_PROTO"),pt=function(){},yt=function(){var t,e=c("iframe"),n=Q.length;for(e.style.display="none",lt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),yt=t.F;n--;)delete yt.prototype[Q[n]];return yt()},vt=Object.create||function(t,e){var n;return null!==t?(pt.prototype=i(t),n=new pt,pt.prototype=null,n[dt]=t):n=yt(),void 0===e?n:ht(n,e)},mt=l.f,gt=T("toStringTag"),bt=function(t,e,n){t&&!v(t=n?t:t.prototype,gt)&&mt(t,gt,{configurable:!0,value:e})},wt={};p(wt,T("iterator"),(function(){return this}));var Ot,Kt=function(t,e,n){t.prototype=vt(wt,{next:d(1,n)}),bt(t,e+" Iterator")},Rt=D("IE_PROTO"),kt=Object.prototype,Mt=Object.getPrototypeOf||function(t){return t=X(t),v(t,Rt)?t[Rt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?kt:null},It=T("iterator"),Ft=!([].keys&&"next"in[].keys()),$t=function(){return this},St=(Ot=!0,function(t,e){var n,r,i=String(S(t)),o=x(e),u=i.length;return o<0||o>=u?Ot?"":void 0:(n=i.charCodeAt(o))<55296||n>56319||o+1===u||(r=i.charCodeAt(o+1))<56320||r>57343?Ot?i.charAt(o):n:Ot?i.slice(o,o+2):r-56320+(n-55296<<10)+65536});!function(t,e,n,r,i,o,u){Kt(n,e,r);var a,s,c,h=function(t){if(!Ft&&t in y)return y[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},f=e+" Iterator",l="values"==i,d=!1,y=t.prototype,v=y[It]||y["@@iterator"]||i&&y[i],m=v||h(i),g=i?l?h("entries"):m:void 0,b="Array"==e&&y.entries||v;if(b&&(c=Mt(b.call(new t)))!==Object.prototype&&c.next&&(bt(c,f,!0),"function"!=typeof c[It]&&p(c,It,$t)),l&&v&&"values"!==v.name&&(d=!0,m=function(){return v.call(this)}),(Ft||d||!y[It])&&p(y,It,m),ct[e]=m,ct[f]=$t,i)if(a={values:l?m:h("values"),keys:o?m:h("keys"),entries:g},u)for(s in a)s in y||K(y,s,a[s]);else M(M.P+M.F*(Ft||d),e,a)}(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=St(e,n),this._i+=t.length,{value:t,done:!1})}));var Et=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}},At=T("iterator"),jt=Array.prototype,xt=function(t){return void 0!==t&&(ct.Array===t||jt[At]===t)},Pt=function(t,e,n){e in t?l.f(t,e,d(0,n)):t[e]=n},Ct=T("toStringTag"),_t="Arguments"==F(function(){return arguments}()),Bt=T("iterator"),Ht=n.getIteratorMethod=function(t){if(null!=t)return t[Bt]||t["@@iterator"]||ct[function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Ct))?n:_t?F(e):"Object"==(r=F(e))&&"function"==typeof e.callee?"Arguments":r}(t)]},Tt=T("iterator"),zt=!1;try{var Ut=[7][Tt]();Ut.return=function(){zt=!0},Array.from(Ut,(function(){throw 2}))}catch(t){}M(M.S+M.F*!function(t,e){if(!e&&!zt)return!1;var n=!1;try{var r=[7],i=r[Tt]();i.next=function(){return{done:n=!0}},r[Tt]=function(){return i},t(r)}catch(t){}return n}((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,r,i,o=X(t),u="function"==typeof this?this:Array,a=arguments.length,s=a>1?arguments[1]:void 0,c=void 0!==s,h=0,f=Ht(o);if(c&&(s=R(s,a>2?arguments[2]:void 0,2)),null==f||u==Array&&xt(f))for(n=new u(e=C(o.length));e>h;h++)Pt(n,h,c?s(o[h],h):o[h]);else for(i=f.call(o),n=new u;!(r=i.next()).done;h++)Pt(n,h,c?Et(i,s,[r.value,h],!0):r.value);return n.length=h,n}});n.Array.from;var Nt=function(){function t(){}return t.register=function(t){this.store=t},t}(),Vt=function(t,e){return(Vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Wt(t,e){function n(){this.constructor=t}Vt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Dt=function(){return(Dt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Lt(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{s(r.next(t))}catch(t){o(t)}}function a(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(u,a)}s((r=r.apply(t,e||[])).next())}))}function Gt(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function Qt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],u=0,a=o.length;u<a;u++,i++)r[i]=o[u];return r}function qt(t){return Array.isArray(t)}function Jt(t){return qt(t)?t.length:Object.keys(t).length}function Yt(t,e){var n=Object.assign({},t);return Object.keys(t).reduce((function(n,r){return n[r]=e(t[r],r,t),n}),n)}function Xt(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=void 0!==e,u=null===e,a=e==e;if("number"==typeof t&&"number"==typeof e||(t=String(t),e=String(e)),!u&&t>e||r&&o&&a||!n&&a||!i)return 1;if(!r&&t<e||u&&n&&i||!o&&i||!a)return-1}return 0}var Zt={isArray:qt,size:Jt,isEmpty:function(t){return 0===Jt(t)},forOwn:function(t,e){Object.keys(t).forEach((function(n){return e(t[n],n,t)}))},map:function(t,e){var n=[];for(var r in t)n.push(e(t[r],r,t));return n},mapValues:Yt,keyBy:function(t,e){var n={};return t.forEach((function(t){n[t[e]]=t})),n},orderBy:function(t,e,n){var r=-1;return function(t,e){var n=t.length;t.sort(e);var r=[];for(;n--;)r[n]=t[n].value;return r}(t.map((function(t){return{criteria:e.map((function(e){return"function"==typeof e?e(t):t[e]})),index:++r,value:t}})),(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,u=i.length,a=n.length;for(;++r<u;){var s=Xt(i[r],o[r]);if(s){if(r>=a)return s;var c=n[r];return s*("desc"===c?-1:1)}}return t.index-e.index}(t,e,n)}))},groupBy:function(t,e){return t.reduce((function(t,n){var r=e(n);return void 0===t[r]&&(t[r]=[]),t[r].push(n),t}),{})},cloneDeep:function t(e){if(null===e)return e;if(qt(e)){var n=[];return e.forEach((function(t){return n.push(t)})),n.map((function(e){return t(e)}))}if("object"==typeof e&&e!=={}){var r=Dt({},e);return Object.keys(r).forEach((function(e){return r[e]=t(r[e])})),r}return e}},te=function(){function t(){}return t.make=function(){return this.count++,""+this.prefix+this.count},t.reset=function(){this.count=0},t.count=0,t.prefix="$uid",t}(),ee=function(t){this.model=t},ne=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.isNullable=!1,i.value=n,i.mutator=r,i}return Wt(e,t),e.prototype.nullable=function(){return this.isNullable=!0,this},e.prototype.mutate=function(t,e){var n=this.mutator||this.model.mutators()[e];return n?n(t):t},e}(ee),re=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return Wt(e,t),e.prototype.make=function(t,e,n){var r=t=void 0!==t?t:this.value;return"function"==typeof t&&(r=t()),this.mutate(r,n)},e}(ne),ie=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return Wt(e,t),e.prototype.make=function(t,e,n){return this.mutate(this.fix(t),n)},e.prototype.fix=function(t){return void 0===t?this.value:"string"==typeof t||null===t&&this.isNullable?t:t+""},e}(ne),oe=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return Wt(e,t),e.prototype.make=function(t,e,n){return this.mutate(this.fix(t),n)},e.prototype.fix=function(t){return void 0===t?this.value:"number"==typeof t?t:"string"==typeof t?parseFloat(t):"boolean"==typeof t?t?1:0:null===t&&this.isNullable?t:0},e}(ne),ue=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return Wt(e,t),e.prototype.make=function(t,e,n){return this.mutate(this.fix(t),n)},e.prototype.fix=function(t){if(void 0===t)return this.value;if("boolean"==typeof t)return t;if("string"==typeof t){if(0===t.length)return!1;var e=parseInt(t,0);return!!isNaN(e)||!!e}return"number"==typeof t?!!t:!(null!==t||!this.isNullable)&&t},e}(ne),ae=function(t){function e(e,n){return t.call(this,e,n)||this}return Wt(e,t),e.prototype.make=function(t){return"number"==typeof t||"string"==typeof t?t:"function"==typeof this.value?this.value():te.make()},e}(ne),se=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Wt(e,t),e.prototype.getRelation=function(t,e,n){var r=t.newQuery(e);return n.forEach((function(t){t(r)})),r},e.prototype.getKeys=function(t,e){return t.reduce((function(t,n){return null===n[e]||void 0===n[e]||t.push(n[e]),t}),[])},e.prototype.mapSingleRelations=function(t,e){var n=new Map;return t.forEach((function(t){var r=t[e];!n.get(r)&&n.set(r,t)})),n},e.prototype.mapManyRelations=function(t,e){var n=new Map;return t.forEach((function(t){var r=t[e],i=n.get(r);i||(i=[],n.set(r,i)),i.push(t)})),n},e.prototype.mapRelationsByOrders=function(t,e,n,r){var i={};return e.forEach((function(e,o){t.filter((function(t){return t[r]===o})).forEach((function(t){var r=t[n];i[r]||(i[r]=[]),i[r]=i[r].concat(e)}))})),i},e.prototype.isOneRelation=function(t){return!qt(t)&&null!==t&&"object"==typeof t&&!this.isNormalizedPolymorphicObject(t)},e.prototype.isNormalizedPolymorphicObject=function(t){return"id,schema"==Object.keys(t).toString()},e.prototype.isManyRelation=function(t){return!!qt(t)&&!(t.length<1)},e.prototype.makeOneRelation=function(t,e){return this.isOneRelation(t)?new(e.getModelFromRecord(t)||e)(t):null},e.prototype.makeManyRelation=function(t,e){var n=this;return this.isManyRelation(t)?t.filter((function(t){return n.isOneRelation(t)})).map((function(t){return new(e.getModelFromRecord(t)||e)(t)})):[]},e}(ee),ce=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.related=o.model.relation(n),o.foreignKey=r,o.localKey=i,o}return Wt(e,t),e.prototype.define=function(t){return t.one(this.related)},e.prototype.attach=function(t,e,n){e[this.localKey]||(e[this.localKey]=this.model.getIndexIdFromRecord(e));var r=n[this.related.entity]&&n[this.related.entity][t];r&&(r[this.foreignKey]=e[this.localKey])},e.prototype.make=function(t,e,n){return this.makeOneRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this.getRelation(t,this.related.entity,r);this.addEagerConstraints(i,e),this.match(e,i.get(),n)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.foreignKey,this.getKeys(e,this.localKey))},e.prototype.match=function(t,e,n){var r=this,i=this.buildDictionary(e);t.forEach((function(t){var e=t[r.localKey],o=i[e];t[n]=o||null}))},e.prototype.buildDictionary=function(t){var e=this;return t.reduce((function(t,n){return t[n[e.foreignKey]]=n,t}),{})},e}(se),he=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.parent=o.model.relation(n),o.foreignKey=r,o.ownerKey=i,o}return Wt(e,t),e.prototype.define=function(t){return t.one(this.parent)},e.prototype.attach=function(t,e,n){void 0===e[this.foreignKey]&&(e[this.foreignKey]=n[this.parent.entity]&&n[this.parent.entity][t]?n[this.parent.entity][t][this.ownerKey]:t)},e.prototype.make=function(t,e,n){return this.makeOneRelation(t,this.parent)},e.prototype.load=function(t,e,n,r){var i=this.getRelation(t,this.parent.entity,r);this.addEagerConstraints(i,e),this.match(e,i.get(),n)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.ownerKey,this.getKeys(e,this.foreignKey))},e.prototype.match=function(t,e,n){var r=this,i=this.buildDictionary(e);t.forEach((function(t){var e=t[r.foreignKey],o=null!==e?i[e]:null;t[n]=o||null}))},e.prototype.buildDictionary=function(t){var e=this;return t.reduce((function(t,n){return t[n[e.ownerKey]]=n,t}),{})},e}(se),fe=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.related=o.model.relation(n),o.foreignKey=r,o.localKey=i,o}return Wt(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){var r=this;t.forEach((function(t){var i="object"==typeof t?n[t.schema][t.id]:n[r.related.entity][t];i&&void 0===i[r.foreignKey]&&(i[r.foreignKey]=e[r.localKey])}))},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this.getRelation(t,this.related.entity,r);this.addEagerConstraints(i,e),this.match(e,i.get(),n)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.foreignKey,this.getKeys(e,this.localKey))},e.prototype.match=function(t,e,n){var r=this,i=this.buildDictionary(e);t.forEach((function(t){var e=t[r.localKey],o=i[e];t[n]=o||[]}))},e.prototype.buildDictionary=function(t){var e=this;return t.reduce((function(t,n){var r=n[e.foreignKey];return t[r]||(t[r]=[]),t[r].push(n),t}),{})},e}(se),le=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.parent=o.model.relation(n),o.foreignKey=r,o.ownerKey=i,o}return Wt(e,t),e.prototype.define=function(t){return t.many(this.parent)},e.prototype.attach=function(t,e,n){var r=this;0!==t.length&&(e[this.foreignKey]=t.map((function(t){var e="object"==typeof t?n[t.schema][t.id]:n[r.parent.entity][t];return r.parent.getIdFromRecord(e)})))},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.parent)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.parent.entity,r);this.addConstraintForHasManyBy(o,e);var u=this.mapSingleRelations(o.get(),this.ownerKey);e.forEach((function(t){var e=i.getRelatedRecords(u,t[i.foreignKey]);t[n]=e}))},e.prototype.addConstraintForHasManyBy=function(t,e){var n=this,r=e.reduce((function(t,e){return t.concat(e[n.foreignKey])}),[]);t.where(this.ownerKey,r)},e.prototype.getRelatedRecords=function(t,e){var n=[];return t.forEach((function(t,r){-1!==e.indexOf(r)&&n.push(t)})),n},e}(se),de=function(t){function e(e,n,r,i,o,u,a){var s=t.call(this,e)||this;return s.related=s.model.relation(n),s.through=s.model.relation(r),s.firstKey=i,s.secondKey=o,s.localKey=u,s.secondLocalKey=a,s}return Wt(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r),u=t.newQuery(this.through.entity);this.addEagerConstraintForThrough(u,e);var a=u.get();this.addEagerConstraintForRelated(o,a);var s=this.mapThroughRelations(a,o);e.forEach((function(t){var e=s[t[i.localKey]];t[n]=e||[]}))},e.prototype.addEagerConstraintForThrough=function(t,e){t.where(this.firstKey,this.getKeys(e,this.localKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.where(this.secondKey,this.getKeys(e,this.secondLocalKey))},e.prototype.mapThroughRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.secondKey);return t.reduce((function(t,e){var i=e[n.firstKey];t[i]||(t[i]=[]);var o=r.get(e[n.secondLocalKey]);return void 0===o||(t[i]=t[i].concat(o)),t}),{})},e}(se),pe=function(t){function e(e,n,r,i,o,u,a){var s=t.call(this,e)||this;return s.pivotKey="pivot",s.related=s.model.relation(n),s.pivot=s.model.relation(r),s.foreignPivotKey=i,s.relatedPivotKey=o,s.parentKey=u,s.relatedKey=a,s}return Wt(e,t),e.prototype.as=function(t){return this.pivotKey=t,this},e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r),u=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(u,e);var a=u.get();this.addEagerConstraintForRelated(o,a);var s=this.mapPivotRelations(a,o);e.forEach((function(t){var e=s[t[i.parentKey]];t[n]=e||[]}))},e.prototype.addEagerConstraintForPivot=function(t,e){t.whereFk(this.foreignPivotKey,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.relatedPivotKey))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return e.orders.length?this.mapRelationsByOrders(t,r,this.foreignPivotKey,this.relatedPivotKey):t.reduce((function(t,e){var i=e[n.foreignPivotKey];t[i]||(t[i]=[]);var o=r.get(e[n.relatedPivotKey]);return o&&(t[i]=t[i].concat(o.map((function(t){return t[n.pivotKey]=e,t})))),t}),{})},e.prototype.createPivots=function(t,e,n){var r=this;return Zt.isArray(this.pivot.primaryKey)?(Zt.forOwn(e[t.entity],(function(t){var i=t[n];void 0!==i&&0!==i.length&&r.createPivotRecord(e,t,i)})),e):e},e.prototype.createPivotRecord=function(t,e,n){var r=this;n.forEach((function(n){var i,o,u=e[r.parentKey],a=t[r.related.entity][n][r.relatedKey],s=JSON.stringify([r.pivot.primaryKey[0]===r.foreignPivotKey?u:a,r.pivot.primaryKey[1]===r.foreignPivotKey?u:a]),c=t[r.pivot.entity]?t[r.pivot.entity][s]:{},h=t[r.related.entity][n][r.pivotKey]||{};t[r.pivot.entity]=Dt(Dt({},t[r.pivot.entity]),((i={})[s]=Dt(Dt(Dt({},c),h),((o={$id:s})[r.foreignPivotKey]=u,o[r.relatedPivotKey]=a,o)),i))}))},e}(se),ye=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.id=n,i.type=r,i}return Wt(e,t),e.prototype.define=function(t){var e=this;return t.union((function(t,n){return n[e.type]}))},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){var r=e[this.type];try{var i=this.model.relation(r);return this.makeOneRelation(t,i)}catch(t){return null}},e.prototype.load=function(t,e,n,r){var i=this,o=this.getTypes(e).reduce((function(e,n){var o=i.getRelation(t,n,r);return e[n]=i.mapSingleRelations(o.get(),"$id"),e}),{});e.forEach((function(t){var e=t[i.id],r=t[i.type],u=o[r].get(String(e));t[n]=u||null}))},e.prototype.getTypes=function(t){var e=this;return t.reduce((function(t,n){var r=n[e.type];return!t.includes(r)&&t.push(r),t}),[])},e}(se),ve=function(t){function e(e,n,r,i,o){var u=t.call(this,e)||this;return u.related=u.model.relation(n),u.id=r,u.type=i,u.localKey=o,u}return Wt(e,t),e.prototype.define=function(t){return t.one(this.related)},e.prototype.attach=function(t,e,n){var r=n[this.related.entity][t];r[this.id]=r[this.id]||this.related.getIdFromRecord(e),r[this.type]=r[this.type]||this.model.baseEntity||this.model.entity},e.prototype.make=function(t,e,n){return this.makeOneRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r);this.addEagerConstraintForMorphOne(o,e,t.baseModel.entity);var u=this.mapSingleRelations(o.get(),this.id);e.forEach((function(t){var e=u.get(t[i.localKey]);t[n]=e||null}))},e.prototype.addEagerConstraintForMorphOne=function(t,e,n){t.whereFk(this.type,n).whereFk(this.id,this.getKeys(e,this.localKey))},e}(se),me=function(t){function e(e,n,r,i,o){var u=t.call(this,e)||this;return u.related=u.model.relation(n),u.id=r,u.type=i,u.localKey=o,u}return Wt(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){var r=this;t.forEach((function(t){var i;(i="object"==typeof t?n[r.related.getTypeModel(t.schema).entity][t.id]:n[r.related.entity][t])[r.id]=i[r.id]||r.related.getIdFromRecord(e),i[r.type]=i[r.type]||r.model.baseEntity||r.model.entity}))},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r);this.addEagerConstraintForMorphMany(o,e,t.baseModel.entity);var u=this.mapManyRelations(o.get(),this.id);e.forEach((function(t){var e=u.get(t[i.localKey]);t[n]=e||[]}))},e.prototype.addEagerConstraintForMorphMany=function(t,e,n){t.whereFk(this.type,n).whereFk(this.id,this.getKeys(e,this.localKey))},e}(se),ge=function(t){function e(e,n,r,i,o,u,a,s){var c=t.call(this,e)||this;return c.pivotKey="pivot",c.related=c.model.relation(n),c.pivot=c.model.relation(r),c.relatedId=i,c.id=o,c.type=u,c.parentKey=a,c.relatedKey=s,c}return Wt(e,t),e.prototype.as=function(t){return this.pivotKey=t,this},e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r),u=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(u,e,t.entity);var a=u.get();this.addEagerConstraintForRelated(o,a);var s=this.mapPivotRelations(a,o);e.forEach((function(t){var e=s[t[i.parentKey]];t[n]=e||[]}))},e.prototype.addEagerConstraintForPivot=function(t,e,n){t.whereFk(this.type,n).whereFk(this.id,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.relatedId))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return e.orders.length?this.mapRelationsByOrders(t,r,this.id,this.relatedId):t.reduce((function(t,e){var i=e[n.id];t[i]||(t[i]=[]);var o=r.get(e[n.relatedId]);return void 0===o||0===o.length||(t[i]=t[i].concat(o.map((function(t){return t[n.pivotKey]=e,t})))),t}),{})},e.prototype.createPivots=function(t,e,n){var r=this;return Zt.forOwn(e[t.entity],(function(i){var o=t.query().newQuery(r.pivot.entity).where(r.id,i[r.parentKey]).where(r.type,t.entity).get(),u=(i[n]||[]).filter((function(t){return!o.includes(t)}));Zt.isArray(u)&&0!==u.length&&r.createPivotRecord(t,e,i,u)})),e},e.prototype.createPivotRecord=function(t,e,n,r){var i=this;r.forEach((function(r){var o,u,a=n[i.parentKey],s=e[i.related.entity][r][i.relatedKey],c=a+"_"+r+"_"+t.entity,h=e[i.related.entity][r][i.pivotKey]||{};e[i.pivot.entity]=Dt(Dt({},e[i.pivot.entity]),((o={})[c]=Dt(Dt({},h),((u={$id:c})[i.relatedId]=s,u[i.id]=a,u[i.type]=t.entity,u)),o))}))},e}(se),be=function(t){function e(e,n,r,i,o,u,a,s){var c=t.call(this,e)||this;return c.pivotKey="pivot",c.related=c.model.relation(n),c.pivot=c.model.relation(r),c.relatedId=i,c.id=o,c.type=u,c.parentKey=a,c.relatedKey=s,c}return Wt(e,t),e.prototype.as=function(t){return this.pivotKey=t,this},e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r),u=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(u,e,this.related.entity);var a=u.get();this.addEagerConstraintForRelated(o,a);var s=this.mapPivotRelations(a,o);e.forEach((function(t){var e=s[t[i.parentKey]];t[n]=e||[]}))},e.prototype.addEagerConstraintForPivot=function(t,e,n){t.whereFk(this.type,n).whereFk(this.relatedId,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.id))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return e.orders.length?this.mapRelationsByOrders(t,r,this.relatedId,this.id):t.reduce((function(t,e){var i=e[n.relatedId];t[i]||(t[i]=[]);var o=r.get(e[n.id]);return void 0===o||0===o.length||(t[i]=t[i].concat(o.map((function(t){return t[n.pivotKey]=e,t})))),t}),{})},e.prototype.createPivots=function(t,e,n){var r=this;return Zt.forOwn(e[t.entity],(function(t){var i=t[n];Zt.isArray(i)&&r.createPivotRecord(e,t,i)})),e},e.prototype.createPivotRecord=function(t,e,n){var r=this;n.forEach((function(n){var i,o,u=e[r.parentKey],a=n+"_"+u+"_"+r.related.entity,s=t[r.related.entity][n][r.pivotKey]||{};t[r.pivot.entity]=Dt(Dt({},t[r.pivot.entity]),((i={})[a]=Dt(Dt({},s),((o={$id:a})[r.relatedId]=u,o[r.id]=r.model.getIdFromRecord(t[r.related.entity][n]),o[r.type]=r.related.entity,o)),i))}))},e}(se),we={relations:!0};function Oe(t){var e=Ie.getModelFromRecord(t),n=Ke(t,{relations:!1});if(n.$id=t.$id,e.baseEntity&&!t[e.typeKey]){var r=e.database().baseModel(e);n[r.typeKey]=r.getTypeKeyValueFromModel(e)}return n}function Ke(t,e){void 0===e&&(e={}),e=Dt(Dt({},we),e);var n={},r=t.$fields();for(var i in r){var o=r[i],u=t[i];o instanceof se?n[i]=e.relations?ke(u):Me(u):n[i]=Re(t[i])}return n}function Re(t){return null===t?null:qt(t)?t.map((function(t){return Re(t)})):"object"==typeof t?function(t){var e={};for(var n in t)e[n]=Re(t[n]);return e}(t):t}function ke(t){return null===t?null:qt(t)?t.map((function(t){return t.$toJson()})):t.$toJson()}function Me(t){return qt(t)?[]:null}var Ie=function(){function t(t){this.$id=null,this.$fill(t)}return t.fields=function(){return{}},t.attr=function(t,e){return new re(this,t,e)},t.string=function(t,e){return new ie(this,t,e)},t.number=function(t,e){return new oe(this,t,e)},t.boolean=function(t,e){return new ue(this,t,e)},t.uid=function(t){return new ae(this,t)},t.increment=function(){return this.uid()},t.hasOne=function(t,e,n){return new ce(this,t,e,this.localKey(n))},t.belongsTo=function(t,e,n){return new he(this,t,e,this.relation(t).localKey(n))},t.hasMany=function(t,e,n){return new fe(this,t,e,this.localKey(n))},t.hasManyBy=function(t,e,n){return new le(this,t,e,this.relation(t).localKey(n))},t.hasManyThrough=function(t,e,n,r,i,o){return new de(this,t,e,n,r,this.localKey(i),this.relation(e).localKey(o))},t.belongsToMany=function(t,e,n,r,i,o){return new pe(this,t,e,n,r,this.localKey(i),this.relation(t).localKey(o))},t.morphTo=function(t,e){return new ye(this,t,e)},t.morphOne=function(t,e,n,r){return new ve(this,t,e,n,this.localKey(r))},t.morphMany=function(t,e,n,r){return new me(this,t,e,n,this.localKey(r))},t.morphToMany=function(t,e,n,r,i,o,u){return new ge(this,t,e,n,r,i,this.localKey(o),this.relation(t).localKey(u))},t.morphedByMany=function(t,e,n,r,i,o,u){return new be(this,t,e,n,r,i,this.localKey(o),this.relation(t).localKey(u))},t.mutators=function(){return{}},t.types=function(){return{}},t.store=function(){return Nt.store},t.database=function(){return this.store().$db()},t.namespace=function(t){return this.database().namespace+"/"+this.entity+"/"+t},t.getters=function(t){return this.store().getters[this.namespace(t)]},t.dispatch=function(t,e){return this.store().dispatch(this.namespace(t),e)},t.commit=function(t){this.store().commit(this.database().namespace+"/$mutate",{entity:this.entity,callback:t})},t.getFields=function(){return this.cachedFields||(this.cachedFields={}),this.cachedFields[this.entity]||(this.cachedFields[this.entity]=this.fields()),this.cachedFields[this.entity]},t.all=function(){return this.getters("all")()},t.find=function(t){return this.getters("find")(t)},t.findIn=function(t){return this.getters("findIn")(t)},t.query=function(){return this.getters("query")()},t.exists=function(){return this.query().exists()},t.new=function(){return this.dispatch("new")},t.create=function(t){return this.dispatch("create",t)},t.insert=function(t){return this.dispatch("insert",t)},t.update=function(t){return this.dispatch("update",t)},t.insertOrUpdate=function(t){return this.dispatch("insertOrUpdate",t)},t.delete=function(t){return this.dispatch("delete",t)},t.deleteAll=function(){return this.dispatch("deleteAll")},t.isPrimaryKey=function(t){return Zt.isArray(this.primaryKey)?this.primaryKey.includes(t):this.primaryKey===t},t.isCompositePrimaryKey=function(){return Zt.isArray(this.primaryKey)},t.getIdFromRecord=function(t){var e=this,n=this.primaryKey;if("string"==typeof n)return this.getIdFromValue(t[n]);var r=n.reduce((function(n,r){var i=e.getIdFromValue(t[r]);return null!==i&&n.push(i),n}),[]);return r.length===n.length?r:null},t.getIdFromValue=function(t){return"string"==typeof t&&""!==t||"number"==typeof t?t:null},t.getIndexIdFromRecord=function(t){var e=this.getIdFromRecord(t);return null===e?null:Zt.isArray(e)?JSON.stringify(e):String(e)},t.localKey=function(t){return t||("string"==typeof this.primaryKey?this.primaryKey:"id")},t.getModelFromRecord=function(e){return e instanceof t?e.$self():this.getTypeModel(e[this.typeKey])},t.relation=function(t){return"string"!=typeof t?t:this.database().model(t)},t.pivotFields=function(){var t=[];return Zt.forOwn(this.getFields(),(function(e,n){var r;(e instanceof pe||e instanceof ge||e instanceof be)&&t.push(((r={})[n]=e,r))})),t},t.hasPivotFields=function(){return this.pivotFields().length>0},t.hasTypes=function(){return Object.keys(this.types()).length>0},t.getTypeModel=function(t){var e=this.types()[t];return e||null},t.getTypeKeyValueFromModel=function(t){var e=t||this,n=this.types();for(var r in n)if(n[r].entity===e.entity)return r;return null},t.findRelationInSubTypes=function(t){var e=this.types();for(var n in e){var r=e[n].getFields();for(var i in r)if(i===t&&r[i]instanceof se)return r[i]}return null},t.hydrate=function(t){return new this(t).$getAttributes()},t.prototype.$self=function(){return this.constructor},t.prototype.$primaryKey=function(){return this.$self().primaryKey},t.prototype.$fields=function(){return this.$self().getFields()},t.prototype.$setIndexId=function(t){return this.$id=t,this},t.prototype.$store=function(){return this.$self().store()},t.prototype.$namespace=function(t){return this.$self().namespace(t)},t.prototype.$getters=function(t){return this.$self().getters(t)},t.prototype.$dispatch=function(t,e){return Lt(this,void 0,void 0,(function(){return Gt(this,(function(n){return[2,this.$self().dispatch(t,e)]}))}))},t.prototype.$all=function(){return this.$getters("all")()},t.prototype.$find=function(t){return this.$getters("find")(t)},t.prototype.$findIn=function(t){return this.$getters("findIn")(t)},t.prototype.$query=function(){return this.$getters("query")()},t.prototype.$create=function(t){return Lt(this,void 0,void 0,(function(){return Gt(this,(function(e){return[2,this.$dispatch("create",t)]}))}))},t.prototype.$insert=function(t){return Lt(this,void 0,void 0,(function(){return Gt(this,(function(e){return[2,this.$dispatch("insert",t)]}))}))},t.prototype.$update=function(t){return Lt(this,void 0,void 0,(function(){return Gt(this,(function(e){return Zt.isArray(t)||void 0!==t.where?[2,this.$dispatch("update",t)]:null===this.$self().getIndexIdFromRecord(t)?[2,this.$dispatch("update",{where:this.$self().getIdFromRecord(this),data:t})]:[2,this.$dispatch("update",t)]}))}))},t.prototype.$insertOrUpdate=function(t){return Lt(this,void 0,void 0,(function(){return Gt(this,(function(e){return[2,this.$dispatch("insertOrUpdate",t)]}))}))},t.prototype.$save=function(){return Lt(this,void 0,void 0,(function(){var t,e,n,r=this;return Gt(this,(function(i){switch(i.label){case 0:return t=this.$self().getFields(),e=Object.keys(t).reduce((function(e,n){return t[n]instanceof ne&&(e[n]=r[n]),e}),{}),[4,this.$dispatch("insertOrUpdate",{data:e})];case 1:return n=i.sent(),this.$fill(n[this.$self().entity][0]),[2,this]}}))}))},t.prototype.$delete=function(){return Lt(this,void 0,void 0,(function(){var t,e=this;return Gt(this,(function(n){return t=this.$primaryKey(),Zt.isArray(t)?[2,this.$dispatch("delete",(function(n){return t.every((function(t){return n[t]===e[t]}))}))]:[2,this.$dispatch("delete",this[t])]}))}))},t.prototype.$deleteAll=function(){return Lt(this,void 0,void 0,(function(){return Gt(this,(function(t){return[2,this.$dispatch("deleteAll")]}))}))},t.prototype.$fill=function(t){void 0===t&&(t={});var e=this.$fields();for(var n in e){var r=e[n],i=t[n];this[n]=r.make(i,t,n)}void 0!==t.$id&&this.$setIndexId(t.$id)},t.prototype.$generateId=function(){return this.$generatePrimaryId().$generateIndexId()},t.prototype.$generatePrimaryId=function(){var t=this,e=this.$self().primaryKey;return(Zt.isArray(e)?e:[e]).forEach((function(e){void 0!==t[e]&&null!==t[e]||(t[e]=te.make())})),this},t.prototype.$generateIndexId=function(){return this.$setIndexId(this.$getIndexIdFromAttributes())},t.prototype.$getIndexIdFromAttributes=function(){return this.$self().getIndexIdFromRecord(this)},t.prototype.$getAttributes=function(){return Oe(this)},t.prototype.$toJson=function(){return Ke(this)},t.primaryKey="id",t.typeKey="type",t.state={},t}(),Fe={query:function(t,e,n,r){return function(){return r[t.$connection+"/query"](t.$name)}},all:function(t,e,n,r){return function(){return r[t.$connection+"/all"](t.$name)}},find:function(t,e,n,r){return function(e){return r[t.$connection+"/find"](t.$name,e)}},findIn:function(t,e,n,r){return function(e){return r[t.$connection+"/findIn"](t.$name,e)}}};var $e={new:function(t){return Lt(this,void 0,void 0,(function(){var e,n;return Gt(this,(function(r){return e=t.state,n=e.$name,[2,t.dispatch(e.$connection+"/new",{entity:n},{root:!0})]}))}))},create:function(t,e){return Lt(this,void 0,void 0,(function(){var n,r;return Gt(this,(function(i){return n=t.state,r=n.$name,[2,t.dispatch(n.$connection+"/create",Dt(Dt({},e),{entity:r}),{root:!0})]}))}))},insert:function(t,e){return Lt(this,void 0,void 0,(function(){var n,r;return Gt(this,(function(i){return n=t.state,r=n.$name,[2,t.dispatch(n.$connection+"/insert",Dt(Dt({},e),{entity:r}),{root:!0})]}))}))},update:function(t,e){return Lt(this,void 0,void 0,(function(){var n,r;return Gt(this,(function(i){return n=t.state,r=n.$name,qt(e)||void 0===e.data?[2,t.dispatch(n.$connection+"/update",{entity:r,data:e},{root:!0})]:[2,t.dispatch(n.$connection+"/update",Dt({entity:r},e),{root:!0})]}))}))},insertOrUpdate:function(t,e){return Lt(this,void 0,void 0,(function(){var n,r;return Gt(this,(function(i){return n=t.state,r=n.$name,[2,t.dispatch(n.$connection+"/insertOrUpdate",Dt({entity:r},e),{root:!0})]}))}))},delete:function(t,e){return Lt(this,void 0,void 0,(function(){var n,r,i;return Gt(this,(function(o){return n=t.state,r=n.$name,i=e,[2,t.dispatch(n.$connection+"/delete",{entity:r,where:i},{root:!0})]}))}))},deleteAll:function(t){return Lt(this,void 0,void 0,(function(){var e,n;return Gt(this,(function(r){return e=t.state,n=e.$name,[2,t.dispatch(e.$connection+"/deleteAll",{entity:n},{root:!0})]}))}))}};function Se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ee(t,e,n){return e&&Se(t.prototype,e),n&&Se(t,n),t}function Ae(){return(Ae=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function je(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function xe(t){return!(!t||"function"!=typeof t.hasOwnProperty||!(t.hasOwnProperty("__ownerID")||t._map&&t._map.hasOwnProperty("__ownerID")))}function Pe(t,e,n){return Object.keys(t).reduce((function(e,r){var i=""+r;return e.has(i)?e.set(i,n(e.get(i),t[i])):e}),e)}var Ce=function(){function t(t,e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),!t||"string"!=typeof t)throw new Error("Expected a string key for Entity, but found "+t+".");var r=n,i=r.idAttribute,o=void 0===i?"id":i,u=r.mergeStrategy,a=void 0===u?function(t,e){return Ae({},t,e)}:u,s=r.processStrategy,c=void 0===s?function(t){return Ae({},t)}:s,h=r.fallbackStrategy,f=void 0===h?function(t,e){}:h;this._key=t,this._getId="function"==typeof o?o:function(t){return function(e){return xe(e)?e.get(t):e[t]}}(o),this._idAttribute=o,this._mergeStrategy=a,this._processStrategy=c,this._fallbackStrategy=f,this.define(e)}var e=t.prototype;return e.define=function(t){this.schema=Object.keys(t).reduce((function(e,n){var r,i=t[n];return Ae({},e,((r={})[n]=i,r))}),this.schema||{})},e.getId=function(t,e,n){return this._getId(t,e,n)},e.merge=function(t,e){return this._mergeStrategy(t,e)},e.fallback=function(t,e){return this._fallbackStrategy(t,e)},e.normalize=function(t,e,n,r,i,o){var u=this,a=this.getId(t,e,n),s=this.key;if(s in o||(o[s]={}),a in o[s]||(o[s][a]=[]),o[s][a].some((function(e){return e===t})))return a;o[s][a].push(t);var c=this._processStrategy(t,e,n);return Object.keys(this.schema).forEach((function(e){if(c.hasOwnProperty(e)&&"object"==typeof c[e]){var n=u.schema[e],a="function"==typeof n?n(t):n;c[e]=r(c[e],c,e,a,i,o)}})),i(this,c,t,e,n),a},e.denormalize=function(t,e){var n=this;return xe(t)?Pe(this.schema,t,e):(Object.keys(this.schema).forEach((function(r){if(t.hasOwnProperty(r)){var i=n.schema[r];t[r]=e(t[r],i)}})),t)},Ee(t,[{key:"key",get:function(){return this._key}},{key:"idAttribute",get:function(){return this._idAttribute}}]),t}(),_e=function(){function t(t,e){e&&(this._schemaAttribute="string"==typeof e?function(t){return t[e]}:e),this.define(t)}var e=t.prototype;return e.define=function(t){this.schema=t},e.getSchemaAttribute=function(t,e,n){return!this.isSingleSchema&&this._schemaAttribute(t,e,n)},e.inferSchema=function(t,e,n){if(this.isSingleSchema)return this.schema;var r=this.getSchemaAttribute(t,e,n);return this.schema[r]},e.normalizeValue=function(t,e,n,r,i,o){var u=this.inferSchema(t,e,n);if(!u)return t;var a=r(t,e,n,u,i,o);return this.isSingleSchema||null==a?a:{id:a,schema:this.getSchemaAttribute(t,e,n)}},e.denormalizeValue=function(t,e){var n=xe(t)?t.get("schema"):t.schema;return this.isSingleSchema||n?e((this.isSingleSchema?void 0:xe(t)?t.get("id"):t.id)||t,this.isSingleSchema?this.schema:this.schema[n]):t},Ee(t,[{key:"isSingleSchema",get:function(){return!this._schemaAttribute}}]),t}(),Be=function(t){function e(e,n){if(!n)throw new Error('Expected option "schemaAttribute" not found on UnionSchema.');return t.call(this,e,n)||this}je(e,t);var n=e.prototype;return n.normalize=function(t,e,n,r,i,o){return this.normalizeValue(t,e,n,r,i,o)},n.denormalize=function(t,e){return this.denormalizeValue(t,e)},e}(_e),He=function(t){function e(){return t.apply(this,arguments)||this}je(e,t);var n=e.prototype;return n.normalize=function(t,e,n,r,i,o){var u=this;return Object.keys(t).reduce((function(e,n,a){var s,c=t[n];return null!=c?Ae({},e,((s={})[n]=u.normalizeValue(c,t,n,r,i,o),s)):e}),{})},n.denormalize=function(t,e){var n=this;return Object.keys(t).reduce((function(r,i){var o,u=t[i];return Ae({},r,((o={})[i]=n.denormalizeValue(u,e),o))}),{})},e}(_e),Te=function(t){return Array.isArray(t)?t:Object.keys(t).map((function(e){return t[e]}))},ze=function(t,e,n,r,i,o,u){return t=function(t){if(Array.isArray(t)&&t.length>1)throw new Error("Expected schema definition to be a single schema, but found "+t.length+".");return t[0]}(t),Te(e).map((function(e,a){return i(e,n,r,t,o,u)}))},Ue=function(t){function e(){return t.apply(this,arguments)||this}je(e,t);var n=e.prototype;return n.normalize=function(t,e,n,r,i,o){var u=this;return Te(t).map((function(t,a){return u.normalizeValue(t,e,n,r,i,o)})).filter((function(t){return null!=t}))},n.denormalize=function(t,e){var n=this;return t&&t.map?t.map((function(t){return n.denormalizeValue(t,e)})):t},e}(_e),Ne=function(t,e,n,r,i,o,u){var a=Ae({},e);return Object.keys(t).forEach((function(n){var r=t[n],s="function"==typeof r?r(e):r,c=i(e[n],e,n,s,o,u);null==c?delete a[n]:a[n]=c})),a},Ve=function(t,e,n){if(xe(e))return Pe(t,e,n);var r=Ae({},e);return Object.keys(t).forEach((function(e){null!=r[e]&&(r[e]=n(r[e],t[e]))})),r},We=function t(e,n,r,i,o,u){return"object"==typeof e&&e?"object"!=typeof i||i.normalize&&"function"==typeof i.normalize?i.normalize(e,n,r,t,o,u):(Array.isArray(i)?ze:Ne)(i,e,n,r,t,o,u):e},De={Array:Ue,Entity:Ce,Object:function(){function t(t){this.define(t)}var e=t.prototype;return e.define=function(t){this.schema=Object.keys(t).reduce((function(e,n){var r,i=t[n];return Ae({},e,((r={})[n]=i,r))}),this.schema||{})},e.normalize=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ne.apply(void 0,[this.schema].concat(e))},e.denormalize=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ve.apply(void 0,[this.schema].concat(e))},t}(),Union:Be,Values:He},Le=function(){function t(){}return t.create=function(t){var e=this;return function(n,r,i){return e.generateIds(n,t),e.generateIndexId(n,t)}},t.generateIds=function(t,e){(qt(e.primaryKey)?e.primaryKey:[e.primaryKey]).forEach((function(n){if(void 0===t[n]||null===t[n]){var r=e.getFields()[n];t[n]=r instanceof ae?r.make():te.make()}}))},t.generateIndexId=function(t,e){return t.$id=e.getIndexIdFromRecord(t),t.$id},t}(),Ge=function(){function t(t){var e=this;this.schemas={},this.model=t;var n=t.database().models();Object.keys(n).forEach((function(t){e.one(n[t])}))}return t.create=function(t){return new this(t).one()},t.prototype.one=function(t){if(t=t||this.model,this.schemas[t.entity])return this.schemas[t.entity];var e=new De.Entity(t.entity,{},{idAttribute:Le.create(t)});this.schemas[t.entity]=e;var n=this.definition(t);return e.define(n),e},t.prototype.many=function(t){var e,n=this;if(t.hasTypes()&&!t.baseEntity){var r=t.types(),i=Object.values(r).map((function(t){var e;return(e={})[t.entity]=n.one(t),e})).reduce((function(t,e){return Object.assign(t,e)}),{});return new De.Array(Dt(Dt({},i),((e={})[t.entity]=this.one(t),e)),(function(e){return Object.keys(r).includes(e[t.typeKey])?r[e[t.typeKey]].entity:t.entity}))}return new De.Array(this.one(t))},t.prototype.union=function(t){return new De.Union(this.schemas,t)},t.prototype.definition=function(t){var e=this,n=t.getFields();return Object.keys(n).reduce((function(t,r){var i=n[r];return i instanceof se&&(t[r]=i.define(e)),t}),{})},t}(),Qe=function(){function t(){}return t.process=function(t,e){if(Zt.isEmpty(e))return{};var n=new Ge(t.model);return function(t,e){if(!t||"object"!=typeof t)throw new Error('Unexpected input given to normalize. Expected type to be "object", found "'+(null===t?"null":typeof t)+'".');var n={},r=function(t){return function(e,n,r,i,o){var u=e.key,a=e.getId(r,i,o);u in t||(t[u]={});var s=t[u][a];t[u][a]=s?e.merge(s,n):n}}(n);return{entities:n,result:We(t,t,null,e,r,{})}}(e,Zt.isArray(e)?n.many(t.model):n.one()).entities},t}(),qe=function(){function t(){}return t.process=function(t,e){return Object.keys(e).forEach((function(n){var r=t.getModel(n);r.hasPivotFields()&&Zt.forOwn(r.pivotFields(),(function(t){Zt.forOwn(t,(function(t,n){t.createPivots(r,e,n)}))}))})),e},t}(),Je=function(){function t(){}return t.process=function(t,e){return Zt.forOwn(e,(function(n,r){var i=t.getModel(r).fields();Zt.forOwn(n,(function(t){Zt.forOwn(t,(function(n,r){var o=i[r];o instanceof se&&null!==n&&o.attach(n,t,e)}))}))})),e},t}(),Ye=function(){function t(){}return t.normalize=function(t,e){var n=Qe.process(t,e);return n=Je.process(t,n),n=qe.process(t,n)},t}(),Xe=function(){function t(){}return t.filter=function(t,e){var n=this;return 0===t.wheres.length?e:e.filter((function(e){return n.check(t,e)}))},t.check=function(t,e){var n=Zt.groupBy(t.wheres,(function(t){return t.boolean})),r=this.getComparator(t,e),i=[];return n.and&&i.push(n.and.every(r)),n.or&&i.push(n.or.some(r)),-1!==i.indexOf(!0)},t.getComparator=function(t,e){var n=this;return function(r){if("function"==typeof r.field){var i=new on(t.store,t.entity),o=n.executeWhereClosure(i,e,r.field);if("boolean"==typeof o)return o;var u=i.get();return!Zt.isEmpty(u.filter((function(t){return t.$id===e.$id})))}return"function"==typeof r.value?r.value(e[r.field]):Zt.isArray(r.value)?-1!==r.value.indexOf(e[r.field]):e[r.field]===r.value}},t.executeWhereClosure=function(t,e,n){if(3!==n.length)return n(e,t);var r=new t.model(e);return n(e,t,r)},t}(),Ze=function(){function t(){}return t.filter=function(t,e){if(0===t.orders.length)return e;var n=t.orders.map((function(t){return t.key})),r=t.orders.map((function(t){return t.direction}));return Zt.orderBy(e,n,r)},t}(),tn=function(){function t(){}return t.filter=function(t,e){return e.slice(t.offsetNumber,t.offsetNumber+t.limitNumber)},t}(),en=function(){function t(){}return t.where=function(t,e){return Xe.filter(t,e)},t.orderBy=function(t,e){return Ze.filter(t,e)},t.limit=function(t,e){return tn.filter(t,e)},t}(),nn=function(){function t(){}return t.with=function(t,e,n){var r=this;qt(e)?e.forEach((function(e){return r.with(t,e,n)})):this.parseWithRelations(t,e.split("."),n)},t.withAll=function(t,e){this.with(t,"*",e)},t.withAllRecursive=function(t,e){this.withAll(t,(function(t){e>0&&t.withAllRecursive(e-1)}))},t.setEagerLoad=function(t,e,n){void 0===n&&(n=null),t.load[e]||(t.load[e]=[]),n&&t.load[e].push(n)},t.parseWithRelations=function(t,e,n){var r=this,i=e[0];i.split("|").forEach((function(i){1!==e.length?r.setEagerLoad(t,i):r.setEagerLoad(t,i,n)})),1!==e.length&&(e.shift(),this.addNestedWiths(t,i,e,n))},t.addNestedWiths=function(t,e,n,r){this.setEagerLoad(t,e,(function(t){t.with(n.join("."),r)}))},t.eagerLoadRelations=function(t,e){var n=e.reduce((function(e,n){var r=t.model.getModelFromRecord(n).entity;return e[r]||(e[r]=[]),e[r].push(n),e}),{});for(var r in n){var i=n[r],o=t.newQuery(r).model.getFields(),u=t.load["*"]?Object.keys(o).map((function(e){var n;return(n={})[e]=t.load["*"],n})).reduce((function(t,e){return Object.assign(t,e)}),{}):t.load;for(var a in u){var s=o[a];s instanceof se&&s.load(t,i,a,u[a])}}},t}(),rn=function(){function t(){}return t.has=function(t,e,n,r){this.setHas(t,e,"exists",n,r)},t.hasNot=function(t,e,n,r){this.setHas(t,e,"doesntExist",n,r)},t.whereHas=function(t,e,n){this.setHas(t,e,"exists",void 0,void 0,n)},t.whereHasNot=function(t,e,n){this.setHas(t,e,"doesntExist",void 0,void 0,n)},t.setHas=function(t,e,n,r,i,o){void 0===r&&(r=">="),void 0===i&&(i=1),void 0===o&&(o=null),"number"!=typeof r?t.have.push({relation:e,type:n,operator:r,count:i,constraint:o}):t.have.push({relation:e,type:n,operator:">=",count:r,constraint:o})},t.applyConstraints=function(t){if(0!==t.have.length){var e=t.newQuery();this.addHasWhereConstraints(t,e),this.addHasConstraints(t,e.get())}},t.addHasWhereConstraints=function(t,e){t.have.forEach((function(t){e.with(t.relation,t.constraint)}))},t.addHasConstraints=function(t,e){var n=this.getComparators(t),r=[];e.forEach((function(t){n.every((function(e){return e(t)}))&&r.push(t.$self().getIdFromRecord(t))})),t.whereIdIn(r)},t.getComparators=function(t){var e=this;return t.have.map((function(t){return e.getComparator(t)}))},t.getComparator=function(t){var e=this,n=this.getCountComparator(t.operator);return function(r){var i=e.getRelationshipCount(r[t.relation]),o=n(i,t.count);return"exists"===t.type?o:!o}},t.getRelationshipCount=function(t){return qt(t)?t.length:t?1:0},t.getCountComparator=function(t){switch(t){case"=":return function(t,e){return t===e};case">":return function(t,e){return t>e};case">=":return function(t,e){return t>=e};case"<":return function(t,e){return t>0&&t<e};case"<=":return function(t,e){return t>0&&t<=e};default:return function(t,e){return t===e}}},t}(),on=function(){function t(t,e){this.appliedOnBase=!0,this.idFilter=null,this.cancelIdFilter=!1,this.joinedIdFilter=null,this.wheres=[],this.have=[],this.orders=[],this.offsetNumber=0,this.limitNumber=Math.pow(2,53)-1,this.load={},this.store=t,this.database=t.$db(),this.model=this.getModel(e),this.baseModel=this.getBaseModel(e),this.entity=e,this.baseEntity=this.baseModel.entity,this.rootState=this.database.getState(),this.state=this.rootState[this.baseEntity],this.appliedOnBase=this.baseEntity===this.entity}return t.deleteAll=function(t){var e=t.$db(),n=e.models();for(var r in n){e.getState()[r]&&new this(t,r).deleteAll()}},t.on=function(t,e){var n=++this.lastHookId;return this.hooks[t]||(this.hooks[t]=[]),this.hooks[t].push({id:n,callback:e}),n},t.off=function(t){var e=this;return Object.keys(this.hooks).some((function(n){var r=e.hooks[n],i=r.findIndex((function(e){return e.id===t}));return-1!==i&&(r.splice(i,1),!0)}))},t.prototype.self=function(){return this.constructor},t.prototype.newQuery=function(e){return e=e||this.entity,new t(this.store,e)},t.prototype.getModel=function(t){var e=t||this.entity;return this.database.model(e)},t.prototype.getModels=function(){return this.database.models()},t.prototype.getBaseModel=function(t){return this.database.baseModel(t)},t.prototype.all=function(){return this.get()},t.prototype.find=function(t){var e=this.state.data[this.normalizeIndexId(t)];return e?this.item(this.hydrate(e)):null},t.prototype.findIn=function(t){var e=this;if(!Zt.isArray(t))return[];var n=t.reduce((function(t,n){var r=e.state.data[e.normalizeIndexId(n)];return r?(t.push(e.hydrate(r)),t):t}),[]);return this.collect(n)},t.prototype.get=function(){var t=this.select();return this.collect(t)},t.prototype.first=function(){var t=this.select();return 0===t.length?null:this.item(this.hydrate(t[0]))},t.prototype.last=function(){var t=this.select();return 0===t.length?null:this.item(this.hydrate(t[t.length-1]))},t.prototype.exists=function(){return this.select().length>0},t.prototype.where=function(t,e){return this.isIdfilterable(t)&&this.setIdFilter(e),this.wheres.push({field:t,value:e,boolean:"and"}),this},t.prototype.orWhere=function(t,e){return this.cancelIdFilter=!0,this.wheres.push({field:t,value:e,boolean:"or"}),this},t.prototype.whereId=function(t){return this.model.isCompositePrimaryKey()?this.where("$id",this.normalizeIndexId(t)):this.where(this.model.primaryKey,t)},t.prototype.whereIdIn=function(t){var e=this;if(this.model.isCompositePrimaryKey()){var n=t.reduce((function(t,n){return Qt(t,[e.normalizeIndexId(n)])}),[]);return this.where("$id",n)}return this.where(this.model.primaryKey,t)},t.prototype.whereFk=function(t,e){var n=Zt.isArray(e)?e:[e];return t===this.model.primaryKey?(this.setJoinedIdFilter(n),this):(this.where(t,n),this)},t.prototype.normalizeIndexId=function(t){if(this.model.isCompositePrimaryKey()){if(!Zt.isArray(t))throw new Error("[Vuex ORM] Entity `"+this.entity+"` is configured with a composite primary key and expects an array value but instead received: "+JSON.stringify(t));return JSON.stringify(t)}if(Zt.isArray(t))throw new Error("[Vuex ORM] Entity `"+this.entity+"` expects a single value but instead received: "+JSON.stringify(t));return t},t.prototype.isIdfilterable=function(t){return(t===this.model.primaryKey||"$id"===t)&&!this.cancelIdFilter},t.prototype.setIdFilter=function(t){var e=this,n=Zt.isArray(t)?t:[t];null!==this.idFilter?this.idFilter=new Set(n.filter((function(t){return e.idFilter.has(t)}))):this.idFilter=new Set(n)},t.prototype.setJoinedIdFilter=function(t){var e=this;null!==this.joinedIdFilter?this.joinedIdFilter=new Set(t.filter((function(t){return e.joinedIdFilter.has(t)}))):this.joinedIdFilter=new Set(t)},t.prototype.orderBy=function(t,e){return void 0===e&&(e="asc"),this.orders.push({key:t,direction:e}),this},t.prototype.offset=function(t){return this.offsetNumber=t,this},t.prototype.limit=function(t){return this.limitNumber=t,this},t.prototype.with=function(t,e){return void 0===e&&(e=null),nn.with(this,t,e),this},t.prototype.withAll=function(t){return void 0===t&&(t=null),nn.withAll(this,t),this},t.prototype.withAllRecursive=function(t){return void 0===t&&(t=3),nn.withAllRecursive(this,t),this},t.prototype.has=function(t,e,n){return rn.has(this,t,e,n),this},t.prototype.hasNot=function(t,e,n){return rn.hasNot(this,t,e,n),this},t.prototype.whereHas=function(t,e){return rn.whereHas(this,t,e),this},t.prototype.whereHasNot=function(t,e){return rn.whereHasNot(this,t,e),this},t.prototype.records=function(){var t=this;return this.finalizeIdFilter(),this.getIdsToLookup().reduce((function(e,n){var r=t.state.data[n];if(!r)return e;var i=t.hydrate(r);return e.push(i),e}),[])},t.prototype.finalizeIdFilter=function(){this.cancelIdFilter&&null!==this.idFilter&&(this.where(this.model.isCompositePrimaryKey()?"$id":this.model.primaryKey,Array.from(this.idFilter.values())),this.idFilter=null)},t.prototype.getIdsToLookup=function(){var t=this;if(this.idFilter&&this.joinedIdFilter)return Array.from(this.idFilter.values()).filter((function(e){return t.joinedIdFilter.has(e)}));if(this.idFilter||this.joinedIdFilter)return Array.from((this.idFilter||this.joinedIdFilter).values());if(!this.appliedOnBase){var e=this.baseModel.types(),n=this.baseModel.typeKey;return Object.keys(this.state.data).filter((function(r){return e[t.state.data[r][n]]&&e[t.state.data[r][n]].entity==t.model.entity}))}return Object.keys(this.state.data)},t.prototype.select=function(){rn.applyConstraints(this);var t=this.records();return t=this.executeSelectHook("beforeSelect",t),t=this.filterWhere(t),t=this.executeSelectHook("afterWhere",t),t=this.filterOrderBy(t),t=this.executeSelectHook("afterOrderBy",t),t=this.filterLimit(t),t=this.executeSelectHook("afterLimit",t)},t.prototype.filterWhere=function(t){return en.where(this,t)},t.prototype.filterOrderBy=function(t){return en.orderBy(this,t)},t.prototype.filterLimit=function(t){return en.limit(this,t)},t.prototype.count=function(){return this.get().length},t.prototype.max=function(t){var e=this.get().reduce((function(e,n){return"number"==typeof n[t]&&e.push(n[t]),e}),[]);return 0===e.length?0:Math.max.apply(Math,e)},t.prototype.min=function(t){var e=this.get().reduce((function(e,n){return"number"==typeof n[t]&&e.push(n[t]),e}),[]);return 0===e.length?0:Math.min.apply(Math,e)},t.prototype.sum=function(t){return this.get().reduce((function(e,n){return"number"==typeof n[t]&&(e+=n[t]),e}),0)},t.prototype.item=function(t){return Object.keys(this.load).length>0&&nn.eagerLoadRelations(this,[t]),t},t.prototype.collect=function(t){var e=this;return t.length<1?[]:(Object.keys(this.load).length>0&&(t=t.map((function(t){return new(e.model.getModelFromRecord(t))(t)})),nn.eagerLoadRelations(this,t)),t)},t.prototype.new=function(){var t=(new this.model).$generateId();return this.commitInsert(t.$getAttributes()),t},t.prototype.create=function(t,e){return this.persist("create",t,e)},t.prototype.createRecords=function(t){return this.deleteAll(),this.insertRecords(t)},t.prototype.insert=function(t,e){return this.persist("insert",t,e)},t.prototype.insertRecords=function(t){var e=this.mapHydrateRecords(t);return e=this.executeMutationHooks("beforeCreate",e),this.commitInsertRecords(this.convertCollectionToRecords(e)),this.executeMutationHooks("afterCreate",e),e},t.prototype.update=function(t,e,n){if(Zt.isArray(t))return this.persist("update",t,n);if("function"==typeof t){if(!e)throw new Error("You must specify `where` to update records by specifying `data` as a closure.");return"function"==typeof e?this.updateByCondition(t,e):this.updateById(t,e)}if("function"==typeof e)return this.updateByCondition(t,e);if(!e)return this.persist("update",t,n);if(this.model.isCompositePrimaryKey()&&!Zt.isArray(e))throw new Error("[Vuex ORM] You can't specify `where` value as `string` or `number` when you have a composite key defined in your model. Please include composite keys to the `data` fields.");return this.updateById(t,e)},t.prototype.updateRecords=function(t){var e=this.hydrateRecordsByMerging(t);return this.performUpdate(e)},t.prototype.updateById=function(t,e){var n;e="number"==typeof e?e.toString():this.normalizeIndexId(e);var r=this.state.data[e];if(!r)return null;var i=this.hydrate(r),o=((n={})[e]=this.processUpdate(t,i),n);return this.performUpdate(o),o[e]},t.prototype.updateByCondition=function(t,e){var n=this,r=Object.keys(this.state.data).reduce((function(r,i){var o=n.hydrate(n.state.data[i]);return e(o)?(r[i]=n.processUpdate(t,o),r):r}),{});return this.performUpdate(r)},t.prototype.processUpdate=function(t,e){return"function"==typeof t?(t(e),e):e.constructor!==this.model&&e instanceof Ie?this.hydrate(Dt(Dt({},e),t),e.constructor):this.hydrate(Dt(Dt({},e),t))},t.prototype.performUpdate=function(t){var e=this;t=this.updateIndexes(t);var n=this.buildHooks("beforeUpdate"),r=this.buildHooks("afterUpdate"),i=[],o=function(o){var a=t[o];if(n.some((function(t){return!1===t(a,null,e.entity)})))return"continue";u.commitInsert(a.$getAttributes()),r.forEach((function(t){t(a,null,e.entity)})),i.push(a)},u=this;for(var a in t)o(a);return i},t.prototype.updateIndexes=function(t){var e=this;return Object.keys(t).reduce((function(t,n){var r=t[n],i=String(e.model.getIndexIdFromRecord(r));return n!==i&&(r.$id=i,t[i]=r,delete t[n]),t}),t)},t.prototype.insertOrUpdate=function(t,e){return this.persist("insertOrUpdate",t,e)},t.prototype.insertOrUpdateRecords=function(t){var e=this,n={},r={};return Object.keys(t).forEach((function(i){var o=t[i];e.state.data[i]?r[i]=o:n[i]=o})),Qt(this.insertRecords(n),this.updateRecords(r))},t.prototype.persist=function(t,e,n){var r=this,i=Zt.cloneDeep(e),o=this.normalize(i);return Zt.isEmpty(o)?("create"===t&&this.emptyState(),{}):Object.entries(o).reduce((function(e,i){var o=i[0],u=i[1],a=r.newQuery(o),s=r.getPersistMethod(o,n,t),c=a.persistRecords(s,u);return c.length>0&&(e[o]=c),e}),{})},t.prototype.persistRecords=function(t,e){switch(t){case"create":return this.createRecords(e);case"insert":return this.insertRecords(e);case"update":return this.updateRecords(e);case"insertOrUpdate":return this.insertOrUpdateRecords(e)}},t.prototype.getPersistMethod=function(t,e,n){return e.create&&e.create.includes(t)?"create":e.insert&&e.insert.includes(t)?"insert":e.update&&e.update.includes(t)?"update":e.insertOrUpdate&&e.insertOrUpdate.includes(t)?"insertOrUpdate":n},t.prototype.delete=function(t){return"function"==typeof t?this.deleteByCondition(t):this.deleteById(t)},t.prototype.deleteAll=function(){var t=this;return this.appliedOnBase?this.deleteByCondition((function(){return!0})):this.deleteByCondition((function(e){return e.$self().entity===t.model.entity}))},t.prototype.deleteById=function(t){var e=this.find(t);return e?this.deleteByCondition((function(t){return t.$id===e.$id}))[0]:null},t.prototype.deleteByCondition=function(t){var e=this.mapHydrateAndFilterRecords(this.state.data,t);return 0===(e=this.executeMutationHooks("beforeDelete",e)).length?[]:(this.commitDelete(e.map((function(t){return t.$id}))),this.executeMutationHooks("afterDelete",e),e)},t.prototype.commit=function(t,e){this.store.commit(this.database.namespace+"/"+t,Dt({entity:this.baseEntity},e))},t.prototype.commitInsert=function(t){this.commit("insert",{record:t})},t.prototype.commitInsertRecords=function(t){this.commit("insertRecords",{records:t})},t.prototype.commitDelete=function(t){this.commit("delete",{id:t})},t.prototype.normalize=function(t){return Ye.normalize(this,t)},t.prototype.hydrate=function(t,e){var n;return e?new e(t):(this.appliedOnBase||void 0!==t[this.baseModel.typeKey]||(t=Dt(Dt({},t),((n={})[this.baseModel.typeKey]=this.baseModel.getTypeKeyValueFromModel(this.model),n))),new(this.baseModel.getModelFromRecord(t)||this.getBaseModel(this.entity))(t))},t.prototype.hydrateRecordsByMerging=function(t){var e=this;return Object.keys(t).reduce((function(n,r){var i=e.state.data[r];if(!i)return n;var o=t[r],u=e.model.getModelFromRecord(o);return null===u?(n[r]=e.hydrate(Dt(Dt({},i),o)),n):(n[r]=e.hydrate(Dt(Dt({},i),o),u),n)}),{})},t.prototype.mapHydrateRecords=function(t){var e=this;return Zt.map(t,(function(t){return e.hydrate(t)}))},t.prototype.mapHydrateAndFilterRecords=function(t,e){var n=[];for(var r in t){var i=this.hydrate(t[r]);e(i)&&n.push(i)}return n},t.prototype.convertCollectionToRecords=function(t){return t.reduce((function(t,e){return t[e.$id]=e.$getAttributes(),t}),{})},t.prototype.emptyState=function(){this.deleteAll()},t.prototype.buildHooks=function(t){var e=this.getGlobalHookAsArray(t),n=this.model[t];return n&&e.push(n.bind(this.model)),e},t.prototype.getGlobalHookAsArray=function(t){var e=this,n=this.self().hooks[t];return n?n.map((function(t){return t.callback.bind(e)})):[]},t.prototype.executeMutationHooks=function(t,e){var n=this,r=this.buildHooks(t);return 0===r.length?e:e.filter((function(t){return!r.some((function(e){return!1===e(t,null,n.entity)}))}))},t.prototype.executeSelectHook=function(t,e){var n=this;return this.buildHooks(t).reduce((function(t,r){return r(e,n.entity)}),e)},t.hooks={},t.lastHookId=0,t}();var un={query:function(t){var e=this;return function(t){return new on(e,t)}},all:function(t){var e=this;return function(t){return new on(e,t).all()}},find:function(t){var e=this;return function(t,n){return new on(e,t).find(n)}},findIn:function(t){var e=this;return function(t,n){return new on(e,t).findIn(n)}}},an=function(){function t(){}return t.createPersistOptions=function(t){return{create:t.create,insert:t.insert,update:t.update,insertOrUpdate:t.insertOrUpdate}},t}();var sn={new:function(t,e){return Lt(this,void 0,void 0,(function(){return Gt(this,(function(t){return[2,new on(this,e.entity).new()]}))}))},create:function(t,e){return Lt(this,void 0,void 0,(function(){var t,n,r;return Gt(this,(function(i){return t=e.entity,n=e.data,r=an.createPersistOptions(e),[2,new on(this,t).create(n,r)]}))}))},insert:function(t,e){return Lt(this,void 0,void 0,(function(){var t,n,r;return Gt(this,(function(i){return t=e.entity,n=e.data,r=an.createPersistOptions(e),[2,new on(this,t).insert(n,r)]}))}))},update:function(t,e){return Lt(this,void 0,void 0,(function(){var t,n,r,i;return Gt(this,(function(o){return t=e.entity,n=e.data,r=e.where||null,i=an.createPersistOptions(e),[2,new on(this,t).update(n,r,i)]}))}))},insertOrUpdate:function(t,e){return Lt(this,void 0,void 0,(function(){var t,n,r;return Gt(this,(function(i){return t=e.entity,n=e.data,r=an.createPersistOptions(e),[2,new on(this,t).insertOrUpdate(n,r)]}))}))},delete:function(t,e){return Lt(this,void 0,void 0,(function(){var t,n;return Gt(this,(function(r){return t=e.entity,n=e.where,[2,new on(this,t).delete(n)]}))}))},deleteAll:function(t,e){return Lt(this,void 0,void 0,(function(){return Gt(this,(function(t){return e&&e.entity?(new on(this,e.entity).deleteAll(),[2]):(on.deleteAll(this),[2])}))}))}},cn=function(){function t(t,e,n){this.store=t,this.connection=e,this.entity=n,this.rootState=this.store.state[e],this.state=this.rootState[n]}return t.prototype.insert=function(t){var e;this.state.data=Dt(Dt({},this.state.data),((e={})[t.$id]=t,e))},t.prototype.insertRecords=function(t){this.state.data=Dt(Dt({},this.state.data),t)},t.prototype.delete=function(t){var e={};for(var n in this.state.data)t.includes(n)||(e[n]=this.state.data[n]);this.state.data=e},t}();var hn={$mutate:function(t,e){e.callback(t[e.entity])},insert:function(t,e){var n=e.entity,r=e.record;new cn(this,t.$name,n).insert(r)},insertRecords:function(t,e){var n=e.entity,r=e.records;new cn(this,t.$name,n).insertRecords(r)},delete:function(t,e){var n=e.entity,r=e.id;new cn(this,t.$name,n).delete(r)}},fn=function(){function t(){this.entities=[],this.schemas={},this.isStarted=!1}return t.prototype.start=function(t,e){this.store=t,this.namespace=e,this.connect(),this.registerModules(),this.createSchema(),this.isStarted=!0},t.prototype.register=function(t,e){void 0===e&&(e={});var n={name:t.entity,base:t.baseEntity||t.entity,model:this.createBindingModel(t),module:e};this.entities.push(n),this.isStarted&&(this.registerModule(n),this.registerSchema(n))},t.prototype.model=function(t){var e="string"==typeof t?t:t.entity,n=this.models()[e];if(!n)throw new Error("[Vuex ORM] Could not find the model `"+e+"`. Please check if you have registered the model to the database.");return n},t.prototype.baseModel=function(t){var e="string"==typeof t?t:t.entity,n=this.baseModels()[e];if(!n)throw new Error("[Vuex ORM] Could not find the model `"+e+"`. Please check if you have registered the model to the database.");return n},t.prototype.models=function(){return this.entities.reduce((function(t,e){return t[e.name]=e.model,t}),{})},t.prototype.baseModels=function(){var t=this;return this.entities.reduce((function(e,n){return e[n.name]=t.model(n.base),e}),{})},t.prototype.module=function(t){var e=this.modules()[t];if(!e)throw new Error("[Vuex ORM] Could not find the module `"+t+"`. Please check if you have registered the module to the database.");return e},t.prototype.modules=function(){return this.entities.reduce((function(t,e){return t[e.name]=e.module,t}),{})},t.prototype.getState=function(){return this.store.state[this.namespace]},t.prototype.createBindingModel=function(t){var e,n=this;try{e=new Function("model","\n        'use strict';\n        return class "+t.name+" extends model {}\n      ")(t)}catch(n){e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Wt(e,t),e}(t),Object.defineProperty(e,"name",{get:function(){return t.name}})}return Object.defineProperty(e,"store",{value:function(){return n.store}}),e},t.prototype.registerModules=function(){this.store.registerModule(this.namespace,this.createModule())},t.prototype.registerModule=function(t){this.store.registerModule([this.namespace,t.name],this.createSubModule(t))},t.prototype.createModule=function(){var t=this,e=this.createRootModule();return this.entities.forEach((function(n){e.modules[n.name]=t.createSubModule(n)})),e},t.prototype.createRootModule=function(){return{namespaced:!0,state:this.createRootState(),getters:this.createRootGetters(),actions:this.createRootActions(),mutations:this.createRootMutations(),modules:{}}},t.prototype.createRootState=function(){var t=this;return function(){return{$name:t.namespace}}},t.prototype.createRootGetters=function(){var t=this;return Yt(un,(function(e,n){return un[n].bind(t.store)}))},t.prototype.createRootActions=function(){return sn},t.prototype.createRootMutations=function(){return hn},t.prototype.createSubModule=function(t){return{namespaced:!0,state:this.createSubState(t),getters:this.createSubGetters(t),actions:this.createSubActions(t),mutations:this.createSubMutations(t)}},t.prototype.createSubState=function(t){var e=this,n=t.name,r=t.model,i=t.module,o="function"==typeof r.state?r.state():r.state,u="function"==typeof i.state?i.state():i.state;return function(){return Dt(Dt(Dt({},o),u),{$connection:e.namespace,$name:n,data:{}})}},t.prototype.createSubGetters=function(t){return Dt(Dt({},Fe),t.module.getters)},t.prototype.createSubActions=function(t){return Dt(Dt({},$e),t.module.actions)},t.prototype.createSubMutations=function(t){var e;return null!==(e=t.module.mutations)&&void 0!==e?e:{}},t.prototype.createSchema=function(){var t=this;this.entities.forEach((function(e){t.registerSchema(e)}))},t.prototype.registerSchema=function(t){this.schemas[t.name]=Ge.create(t.model)},t.prototype.connect=function(){var t=this;this.store.$db=function(){return t}},t}();return{install:function(t,e){void 0===e&&(e={});var n=e.namespace||"entities";return function(e){t.start(e,n),Nt.register(e)}},use:function(t,e){void 0===e&&(e={});var n={Model:Ie,Attribute:ee,Type:ne,Attr:re,String:ie,Number:oe,Boolean:ue,Uid:ae,Relation:se,HasOne:ce,BelongsTo:he,HasMany:fe,HasManyBy:le,BelongsToMany:pe,HasManyThrough:de,MorphTo:ye,MorphOne:ve,MorphMany:me,MorphToMany:ge,MorphedByMany:be,Getters:Fe,Actions:$e,RootGetters:un,RootActions:sn,RootMutations:hn,Query:on,Database:fn};t.install(n,e)},Container:Nt,Database:fn,Model:Ie,Attribute:ee,Type:ne,Attr:re,String:ie,Number:oe,Boolean:ue,Uid:ae,Relation:se,HasOne:ce,BelongsTo:he,HasMany:fe,HasManyBy:le,BelongsToMany:pe,HasManyThrough:de,MorphTo:ye,MorphOne:ve,MorphMany:me,MorphToMany:ge,MorphedByMany:be,Getters:Fe,Actions:$e,RootGetters:un,RootActions:sn,RootMutations:hn,Query:on}}();
